<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WMS F&B Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./style.css" />
    <style>
      .hidden-section {
        display: none;
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
      }
      .active-section {
        display: block;
        opacity: 1;
      }
      .primary {
        color: #1a2a80;
      }
      .bg-primary {
        background-color: #1a2a80;
      }
      .nav-item {
        transition: all 0.3s ease;
      }
      .nav-item:hover {
        transform: scale(1.05);
        color: #1a2a80;
      }
      .nav-item:hover svg {
        transform: translateY(-2px);
      }
      .nav-item svg {
        transition: transform 0.3s ease;
      }
    </style>
  </head>
  <body class="bg-[#F7F7FB] min-h-screen font-sans">
    <!-- == START HOME == -->
    <section id="home" class="section active-section px-4 pt-4">
      <p id="current-date" class="text-sm primary flex items-center gap-1">
        <span id="date-icon"></span>
        <span></span>
      </p>

      <h1 class="text-2xl font-semibold text-gray-800 mt-1">
        Selamat Datang, der!
      </h1>

      <!-- Kartu Ringkasan -->
      <div
        id="inventory-summary"
        class="bg-[#1A2A80] rounded-2xl p-4 text-white shadow mt-4"
      >
        <h2 class="text-sm opacity-80 mb-2">Ringkasan Inventori</h2>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <p class="text-xs opacity-80">Kategori Barang</p>
            <p id="summary-categories" class="text-lg font-semibold">0</p>
          </div>
          <div>
            <p class="text-xs opacity-80">Folder</p>
            <p id="summary-branches" class="text-lg font-semibold">0</p>
          </div>
          <div>
            <p class="text-xs opacity-80">Total Qty</p>
            <p id="summary-total-qty" class="text-lg font-semibold">0 Barang</p>
          </div>
          <div>
            <p class="text-xs opacity-80">Total Nilai</p>
            <p id="summary-total-value" class="text-lg font-semibold">Rp 0</p>
          </div>
        </div>
      </div>

      <!-- Menu Grid -->
      <div class="grid grid-cols-2 gap-4 mt-6">
        <!-- Stok Rendah -->
        <div class="bg-white rounded-2xl p-4 shadow hover:shadow-md transition">
          <p class="text-gray-800 font-medium">Stok Rendah</p>
          <p class="text-xs text-gray-400">
            Semua barang dengan stok yang hampir habis
          </p>
          <p class="text-sm font-semibold mt-2" id="low-stock-count">
            -- Barang
          </p>
        </div>

        <!-- Pindah Stok -->
        <div class="bg-white rounded-2xl p-4 shadow hover:shadow-md transition">
          <p class="text-gray-800 font-medium">Pindah Stok</p>
          <p class="text-xs text-gray-400">
            Lacak barang yang dipindahkan antar lokasi
          </p>
          <p class="text-sm font-semibold mt-2" id="stock-move-count">
            -- Perpindahan
          </p>
        </div>

        <!-- Sering Terjual -->
        <div class="bg-white rounded-2xl p-4 shadow hover:shadow-md transition">
          <p class="text-gray-800 font-medium">Sering Terjual</p>
          <p class="text-xs text-gray-400">Barang dengan penjualan terbanyak</p>
          <p class="text-sm font-semibold mt-2" id="best-seller-count">
            -- Barang
          </p>
        </div>

        <!-- Perubahan Qty -->
        <div class="bg-white rounded-2xl p-4 shadow hover:shadow-md transition">
          <p class="text-gray-800 font-medium">Perubahan Qty</p>
          <p class="text-xs text-gray-400">Semua barang masuk dan keluar</p>
          <p class="text-sm font-semibold mt-2" id="qty-change-count">
            -- Barang
          </p>
        </div>
      </div>
    </section>
    <!-- == END HOME == -->

    <!-- == START ITEMS == -->
    <section id="items" class="section hidden-section px-4 pt-4">
      <!-- Bagian Atas Sticky -->
      <div class="sticky top-0 bg-[#f9f9fb] z-10 pb-4">
        <!-- Header -->
        <div class="flex justify-between items-center mb-4">
          <h1 class="text-2xl font-semibold text-gray-800">Items</h1>
          <!-- invoice button -->
          <button
            id="show-invoice-btn"
            class="bg-primary text-white px-4 py-2 rounded-xl shadow hover:scale-105 transition"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"
              />
            </svg>
          </button>
        </div>

        <!-- Search + Adjust -->
        <div class="mb-4 flex items-center gap-2">
          <!-- Input Search -->
          <div class="relative flex-1">
            <input
              id="searchInput"
              type="text"
              placeholder="Search items..."
              class="w-full px-4 py-2 pr-8 rounded-xl border border-gray-200 bg-white focus:ring-2 focus:ring-[#1A2A80] focus:border-[#1A2A80] hover:border-[#1A2A80] focus:outline-none transition"
            />
            <!-- Tombol Clear -->
            <button
              id="clearSearch"
              class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 hidden"
              title="Clear Search"
            >
              âœ•
            </button>
          </div>

          <!-- Tombol Adjust -->
          <button
            id="adjustButton"
            class="w-12 h-11 flex items-center justify-center bg-white border border-gray-200 rounded-xl shadow-sm transition group hover:border-[#1A2A80]"
            title="Filter Lanjutan"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6 text-gray-500 group-hover:text-[#1A2A80] transition"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"
              />
            </svg>
          </button>
        </div>

        <!-- Kategori + Pilih Cabang -->
        <div class="flex justify-between items-center mb-4">
          <!-- Kategori -->
          <div
            id="category-filters"
            class="flex gap-2 overflow-x-auto items-center"
          ></div>

          <!-- Container Dropdown Cabang + Riwayat -->
          <div class="flex items-center gap-2">
            <!-- Container Dropdown Cabang -->
            <div class="relative">
              <!-- Tombol Pilih Cabang -->
              <button
                id="branch-btn"
                class="bg-gray-200 px-3 py-1.5 rounded-full text-sm flex items-center gap-2 hover:bg-gray-300"
              >
                Pilih Cabang
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </button>

              <!-- Dropdown List -->
              <div
                id="branch-list"
                class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 hidden z-50"
              >
                <!-- Daftar Cabang -->
                <div class="p-3 space-y-2" id="branch-container">
                  <label class="flex items-center gap-2">
                    <input
                      type="checkbox"
                      checked
                      class="form-checkbox text-blue-600 branch-checkbox"
                      data-branch="Gudang Utama"
                    />
                    <span class="text-sm">Gudang Utama</span>
                  </label>
                </div>

                <!-- Tombol Tambah Cabang -->
                <div class="p-2 border-t">
                  <button
                    id="add-branch-btn"
                    class="w-full text-sm px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600"
                  >
                    + Tambah Cabang
                  </button>
                </div>
              </div>
            </div>
            <!-- Tombol Riwayat -->
            <button
              id="history-btn"
              class="bg-gray-200 px-3 py-1.5 rounded-full text-sm flex items-center gap-2 hover:bg-gray-300"
            >
              Riwayat
            </button>
          </div>

          <!-- Modal Tambah Cabang -->
          <div
            id="branch-modal"
            class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50"
          >
            <div class="bg-white p-4 rounded-lg w-80">
              <h2 class="text-lg font-semibold mb-3">Tambah Cabang Baru</h2>
              <form id="branch-form">
                <input
                  type="text"
                  name="branch-name"
                  placeholder="Nama Cabang"
                  class="w-full border p-2 rounded mb-3"
                  required
                />
                <div class="flex justify-end gap-2">
                  <button
                    type="button"
                    id="cancel-branch-btn"
                    class="text-gray-500"
                  >
                    Batal
                  </button>
                  <button
                    type="submit"
                    class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600"
                  >
                    Simpan
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- == START daftar ITEMS == -->
      <div id="item-grid" class="overflow-x-auto">
        <div class="min-w-[1000px] bg-white rounded-xl overflow-hidden shadow">
          <!-- Header (12 kolom) -->
          <div
            class="grid grid-cols-12 bg-gray-100 border-b text-xs font-semibold text-gray-700"
          >
            <div class="p-3">Kode</div>
            <div class="p-3">Nama</div>
            <div class="p-3">Supplier</div>
            <div class="p-3">Qty</div>
            <div class="p-3">Satuan</div>
            <div class="p-3">Masuk</div>
            <div class="p-3">Keluar</div>
            <div class="p-3">Harga Beli</div>
            <div class="p-3">Avg Harga</div>
            <div class="p-3">Harga Jual</div>
            <div class="p-3">Profit</div>
            <div class="p-3">Status</div>
          </div>

          <!-- Body -->
          <div id="item-rows"></div>
        </div>
      </div>
    </section>

    <!-- == END daftar ITEMS == -->

    <!-- == ITEMS FORM START == -->
    <!-- Modal Add Item -->
    <div
      id="item-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"
    >
      <div class="bg-white w-[90%] max-w-md p-6 rounded-xl shadow-xl">
        <!-- Tombol Switch -->
        <div class="flex border-b rounded-md overflow-hidden">
          <button
            type="button"
            data-form="add"
            class="tab-btn px-4 py-2 border-b-2 border-transparent text-gray-600 hover:font-bold hover:border-primary hover:text-primary"
          >
            Tambah Item
          </button>

          <button
            type="button"
            data-form="in"
            class="tab-btn px-4 py-2 border-b-2 border-transparent text-gray-600 hover:font-bold hover:border-primary hover:text-primary"
          >
            Barang Masuk
          </button>

          <button
            type="button"
            data-form="out"
            class="tab-btn px-4 py-2 border-b-2 border-transparent text-gray-600 hover:font-bold hover:border-primary hover:text-primary"
          >
            Barang Keluar
          </button>
        </div>

        <!-- Form Tambah Item -->
        <form id="form-add" class="form-section space-y-3">
          <input
            type="text"
            name="code"
            placeholder="Kode Item"
            class="w-full border p-2 rounded-xl"
            required
          />
          <input
            type="text"
            name="name"
            placeholder="Nama Item"
            class="w-full border p-2 rounded-xl"
            required
          />
          <input
            type="text"
            name="category"
            placeholder="Kategori"
            class="w-full border p-2 rounded-xl"
            required
          />
          <input
            type="text"
            name="unit"
            placeholder="Satuan (pcs, liter, box, dll.)"
            class="w-full border p-2 rounded-xl"
            required
          />

          <input
            type="text"
            name="supplier"
            placeholder="Supplier"
            class="w-full border p-2 rounded-xl"
            required
          />

          <div class="flex justify-between items-center mt-4">
            <button
              type="submit"
              class="bg-primary text-white px-4 py-2 rounded-xl"
            >
              Tambah
            </button>
            <button type="button" id="cancel-item-btn" class="text-gray-500">
              Batal
            </button>
          </div>
        </form>

        <!-- Form Barang Masuk -->
        <form id="form-in" class="form-section space-y-3 hidden">
          <input
            type="text"
            name="code"
            placeholder="Kode Item"
            class="w-full border p-2 rounded-xl"
            required
          />
          <input
            type="text"
            name="name"
            placeholder="Nama Item"
            class="w-full border p-2 rounded-xl"
            required
          />

          <!-- Pilih Cabang -->
          <select name="branch" class="w-full border p-2 rounded-xl" required>
            <option value="" disabled selected>Pilih Cabang</option>
            <option value="Gudang Utama">Gudang Utama</option>
          </select>

          <input
            type="number"
            name="masuk"
            placeholder="Jumlah Masuk"
            class="w-full border p-2 rounded-xl"
            required
          />
          <input
            type="date"
            name="date_in"
            class="w-full border p-2 rounded-xl"
            required
          />
          <input
            type="text"
            name="harga_total"
            placeholder="Harga Beli"
            class="w-full border p-2 rounded-xl"
            required
          />
          <div class="flex justify-between items-center mt-4">
            <button
              type="submit"
              class="bg-green-600 text-white px-4 py-2 rounded-xl"
            >
              Tambah Masuk
            </button>
            <button type="button" id="cancel-in-btn" class="text-gray-500">
              Batal
            </button>
          </div>
        </form>

        <!-- Form Barang Keluar -->
        <form id="form-out" class="form-section space-y-3 hidden">
          <!-- Pilih Jenis Keluar -->
          <select
            name="jenis_keluar"
            id="jenis-keluar"
            class="w-full border p-2 rounded-xl"
            required
          >
            <option value="" disabled selected>Pilih Jenis Keluar</option>
            <option value="penjualan">Penjualan</option>
            <option value="transfer">Transfer ke Cabang</option>
          </select>
          <input
            type="text"
            name="code"
            placeholder="Kode Item"
            class="w-full border p-2 rounded-xl"
            required
          />
          <input
            type="text"
            name="name"
            placeholder="Nama Item"
            class="w-full border p-2 rounded-xl"
            required
          />

          <!-- Pilih Cabang Asal -->
          <select name="branch" class="w-full border p-2 rounded-xl" required>
            <option value="" disabled selected>Pilih Cabang Asal</option>
            <option value="Gudang Utama">Gudang Utama</option>
          </select>

          <!-- Pilih Cabang Tujuan (hanya muncul kalau transfer) -->
          <select
            name="branch_tujuan"
            id="branch-tujuan"
            class="w-full border p-2 rounded-xl hidden"
          >
            <option value="" disabled selected>Pilih Cabang Tujuan</option>
            <option value="Gudang Utama">Gudang Utama</option>
          </select>

          <input
            type="number"
            name="keluar"
            placeholder="Jumlah Keluar"
            class="w-full border p-2 rounded-xl"
            required
          />
          <input
            type="date"
            name="date_out"
            class="w-full border p-2 rounded-xl"
            required
          />

          <div class="flex justify-between items-center mt-4">
            <button
              type="submit"
              class="bg-red-600 text-white px-4 py-2 rounded-xl"
            >
              Tambah Keluar
            </button>
            <button type="button" id="cancel-out-btn" class="text-gray-500">
              Batal
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal adjust-->
    <div
      id="filterModal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50"
    >
      <div class="bg-white w-96 rounded-xl shadow-lg p-6 relative">
        <!-- Header -->
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold">Filter Lanjutan</h2>
          <button id="closeFilter" class="text-gray-500 hover:text-gray-700">
            âœ•
          </button>
        </div>

        <!-- Form Filter -->
        <form id="filterForm" class="space-y-3">
          <!-- Filter kategori -->
          <div>
            <label class="block text-sm mb-1">Kategori</label>
            <input
              type="text"
              name="category"
              placeholder="cth: elektronik"
              class="w-full border px-3 py-2 rounded-lg"
            />
          </div>

          <!-- Filter supplier -->
          <div>
            <label class="block text-sm mb-1">Supplier</label>
            <input
              type="text"
              name="supplier"
              placeholder="cth: PT Makmur"
              class="w-full border px-3 py-2 rounded-lg"
            />
          </div>

          <!-- Filter stok -->
          <div>
            <label class="block text-sm mb-1">Stok Minimum</label>
            <input
              type="number"
              name="minStock"
              class="w-full border px-3 py-2 rounded-lg"
            />
          </div>

          <div class="flex justify-end gap-2">
            <button
              type="button"
              id="resetFilter"
              class="px-4 py-2 border rounded-lg text-gray-600 hover:bg-gray-100"
            >
              Reset
            </button>
            <button
              type="submit"
              class="px-4 py-2 bg-[#1A2A80] text-white rounded-lg hover:bg-[#142060]"
            >
              Terapkan
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- history modal -->
    <div
      id="history-modal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50"
    >
      <div class="bg-white w-3/4 max-w-4xl rounded-xl shadow-lg p-6 relative">
        <!-- Header -->
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-semibold">Riwayat Transaksi</h2>
          <button
            id="close-history-btn"
            class="text-gray-500 hover:text-gray-700"
          >
            âœ•
          </button>
        </div>

        <!-- Scrollable Table -->
        <div class="overflow-y-auto max-h-[500px]">
          <table class="w-full text-sm border border-gray-200 border-collapse">
            <thead class="bg-gray-100 sticky top-0 z-10">
              <tr>
                <th class="p-2 border">Tanggal</th>
                <th class="p-2 border">Kode</th>
                <th class="p-2 border">Nama</th>
                <th class="p-2 border">Cabang</th>
                <th class="p-2 border">Jenis</th>
                <th class="p-2 border">Jumlah</th>
                <th class="p-2 border">Harga</th>
                <th class="p-2 border">Total</th>
              </tr>
            </thead>
            <tbody id="history-rows">
              <!-- Data transaksi akan di-append di sini via JS -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Modal Invoice -->
    <div
      id="invoice-transfer-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"
    >
      <div class="bg-white rounded-xl p-6 w-[600px] relative z-50">
        <h2 class="text-xl font-bold mb-4">Invoice Barang Keluar</h2>
        <div id="invoice-transfer-content" class="text-sm">
          <p>Belum ada data transfer</p>
        </div>
        <div class="flex justify-end mt-4 gap-2">
          <button
            id="print-invoice-transfer-btn"
            class="bg-blue-600 text-white px-4 py-2 rounded-lg"
          >
            Print
          </button>
          <button
            id="export-invoice-excel"
            class="px-3 py-1 bg-green-500 text-white rounded"
          >
            Export Excel
          </button>
          <button id="close-invoice-transfer-btn" class="text-gray-600">
            Tutup
          </button>
        </div>
      </div>
    </div>

    <!-- == ITEMS FORM END == -->

    <!-- == START STATS == -->
    <section id="stats" class="section hidden-section px-4 pt-4 space-y-6">
      <h1 class="text-2xl font-semibold text-gray-800 mb-4">Statistics</h1>

      <!-- ðŸ”¹ KPI Cards (Transfer) -->
      <div class="grid grid-cols-3 gap-3 mb-4">
        <div class="bg-white rounded-xl shadow p-3 text-center">
          <p class="text-xs text-gray-500">Today</p>
          <p class="text-lg font-semibold text-[#1A2A80]" id="today-transfers">
            0
          </p>
        </div>
        <div class="bg-white rounded-xl shadow p-3 text-center">
          <p class="text-xs text-gray-500">This Week</p>
          <p class="text-lg font-semibold text-[#1A2A80]" id="week-transfers">
            0
          </p>
        </div>
        <div class="bg-white rounded-xl shadow p-3 text-center">
          <p class="text-xs text-gray-500">This Month</p>
          <p class="text-lg font-semibold text-[#1A2A80]" id="month-transfers">
            0
          </p>
        </div>
      </div>

      <!-- ðŸ”¹ 1. Tren Harga Beli (full width) -->
      <div class="bg-white rounded-2xl shadow p-4">
        <div class="flex justify-between items-center mb-3">
          <h2 class="text-sm font-semibold text-gray-700">Tren Harga Beli</h2>
          <select id="hargaBeliSelect" class="border rounded-lg p-1 text-sm">
            <option value="">Pilih Produk</option>
          </select>
        </div>
        <canvas id="hargaBeliChart" class="w-full h-72"></canvas>
      </div>

      <!-- ðŸ”¹ 2 kolom bawah -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch">
        <!-- Sales Trend -->
        <div class="bg-white rounded-2xl shadow p-4 flex flex-col h-96">
          <!-- Header -->
          <div class="flex justify-between items-center mb-3">
            <h2 class="text-sm font-semibold text-gray-700">Sales Chart</h2>
            <div class="flex items-center space-x-2">
              <button
                id="btn-month"
                class="px-2 py-1 text-xs rounded bg-gray-100 text-gray-700 hover:bg-gray-200"
              >
                Month
              </button>
              <button
                id="btn-year"
                class="px-2 py-1 text-xs rounded bg-gray-100 text-gray-700 hover:bg-gray-200"
              >
                Year
              </button>

              <!-- Kebab Menu -->
              <div class="relative">
                <button id="kebabBtn" class="px-2 py-1 text-xl">â‹®</button>
                <div
                  id="kebabMenu"
                  class="absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg hidden z-10"
                >
                  <label
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer"
                  >
                    Upload Sales CSV
                    <input
                      type="file"
                      id="uploadCsv"
                      accept=".csv"
                      class="hidden"
                    />
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Manual Form -->
          <form id="sales-form" class="flex flex-wrap gap-2 mb-4">
            <input
              type="date"
              id="sales-date"
              class="border rounded px-2 py-1 text-sm"
              required
            />
            <input
              type="text"
              id="sales-amount"
              placeholder="Rp"
              class="border rounded px-2 py-1 text-sm w-24"
              required
            />
            <select
              id="sales-branch"
              class="border rounded px-2 py-1 text-sm"
              required
            >
              <option value="">--Pilih Cabang--</option>
            </select>
            <button
              type="submit"
              class="bg-[#1A2A80] text-white px-3 py-1 rounded text-sm hover:opacity-90"
            >
              Add
            </button>
          </form>

          <!-- Chart -->
          <div class="flex-1">
            <canvas id="branchChart" class="w-full h-full"></canvas>
          </div>
        </div>

        <!-- Top Stock Movements -->
        <div class="bg-white rounded-2xl shadow p-4 flex flex-col h-96">
          <h2 class="text-sm font-semibold text-gray-700 mb-3">
            Top Stock Movements
          </h2>
          <div class="flex-1">
            <canvas id="topStockChart" class="w-full h-full"></canvas>
          </div>
        </div>
      </div>

      <!-- ðŸ”¹ 4. Stock Composition / Distribusi Transfer -->
      <div class="bg-white rounded-2xl shadow p-4">
        <h2 class="text-sm font-semibold text-gray-700 mb-3">
          Stock Composition
        </h2>
        <canvas id="stockCompositionChart" class="w-full h-72"></canvas>
      </div>
    </section>
    <!-- == END STATS == -->

    <!-- == START PROFILE == -->
    <section id="profile" class="section hidden-section px-4 pt-6">
      <!-- Header Profil -->
      <div class="bg-[#1A2A80] rounded-2xl p-4 text-white shadow mt-4">
        <div class="flex justify-center">
          <img
            src="https://via.placeholder.com/120"
            alt="Profile"
            class="w-24 h-24 rounded-full border-4 border-white shadow-lg object-cover"
          />
        </div>
        <h2 class="text-white text-lg font-semibold mt-3">Martina Alex</h2>
        <p class="text-blue-100 text-sm">martina.alex2015@gmail.com</p>
      </div>

      <!-- General Menu -->
      <div class="mt-6 bg-white rounded-2xl shadow divide-y">
        <button
          class="flex justify-between items-center w-full p-4 text-gray-700 hover:bg-gray-50"
        >
          <span class="text-sm">Profile Settings</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-gray-400"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"
            />
          </svg>
        </button>
        <button
          class="flex justify-between items-center w-full p-4 text-gray-700 hover:bg-gray-50"
        >
          <span class="text-sm">Change Password</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-gray-400"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"
            />
          </svg>
        </button>
        <button
          class="flex justify-between items-center w-full p-4 text-gray-700 hover:bg-gray-50"
        >
          <span class="text-sm">Notification</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-gray-400"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"
            />
          </svg>
        </button>
      </div>

      <!-- Logout & Change Account -->
      <div class="mt-6 flex flex-col gap-3">
        <button class="bg-[#1A2A80] rounded-2xl p-4 text-white shadow mt-4">
          Logout
        </button>

        <button
          class="mt-3 w-full bg-gray-100 text-gray-700 py-3 rounded-xl shadow hover:bg-gray-200 transition"
        >
          Change Account
        </button>
      </div>
    </section>
    <!-- == END PROFILE == -->

    <!-- == START NAVBAR == -->
    <nav
      class="fixed bottom-4 left-1/2 -translate-x-1/2 w-[90%] max-w-md bg-white shadow-lg rounded-2xl px-4 py-2 flex justify-between items-center"
    >
      <!-- HOME -->
      <a
        href="#"
        data-tab="home"
        class="nav-item flex flex-col items-center primary relative"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-6 h-6 mb-1"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 9.75L12 3l9 6.75V21H3V9.75z"
          />
        </svg>
        <span class="text-xs">Home</span>
        <span
          class="indicator absolute -bottom-1 w-1 h-1 rounded-full bg-[#1A2A80]"
        ></span>
      </a>

      <!-- ITEMS -->
      <a
        href="#"
        data-tab="items"
        class="nav-item flex flex-col items-center text-gray-500 relative"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"
          />
        </svg>
        <span class="text-xs">Items</span>
        <span
          class="indicator absolute -bottom-1 w-1 h-1 rounded-full bg-[#1A2A80] hidden"
        ></span>
      </a>

      <!-- BUTTON ADD -->
      <button
        id="add-item-btn"
        class="bg-primary w-14 h-14 rounded-full -mt-8 flex items-center justify-center shadow-lg border-4 border-white"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-6 h-6 text-white"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 4v16m8-8H4"
          />
        </svg>
      </button>

      <!-- STATS -->
      <a
        href="#"
        data-tab="stats"
        class="nav-item flex flex-col items-center text-gray-500 relative"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125 0.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"
          />
        </svg>
        <span class="text-xs">Stats</span>
        <span
          class="indicator absolute -bottom-1 w-1 h-1 rounded-full bg-[#1A2A80] hidden"
        ></span>
      </a>

      <!-- PROFILE -->
      <a
        href="#"
        data-tab="profile"
        class="nav-item flex flex-col items-center text-gray-500 relative"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-6 h-6 mb-1"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5.121 17.804A7 7 0 0112 15a7 7 0 016.879 2.804M15 10a3 3 0 11-6 0 3 3 0 016 0z"
          />
        </svg>
        <span class="text-xs">Profile</span>
        <span
          class="indicator absolute -bottom-1 w-1 h-1 rounded-full bg-[#1A2A80] hidden"
        ></span>
      </a>
    </nav>
    <!-- == END NAVBAR == -->
    <canvas id="branchChart" height="200"></canvas>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Plugin zoom -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.0"></script>
    <!-- Adapter untuk time scale -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <!-- atau kalau mau pakai moment:
<script src="https://cdn.jsdelivr.net/npm/moment"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment"></script>
-->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="./js/supabase.js"></script>
    <script src="./js/main.js"></script>
  </body>
</html>
